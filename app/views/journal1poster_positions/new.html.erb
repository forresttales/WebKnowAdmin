<% provide(:title, 'Journal Poster 1 Positions New') %>

	
	<style>
		
		.container-journalposter {
			/*width: 1200px;*/
			min-height: 900px;
		}
		.journalposter-background {
			width: 1000px;
			margin: 0 auto;				
			height: 710px;
			background: #F1F2E1 url(../journal_poster/poster-map-unpop-w1000-h710.png) no-repeat right top;
		}
		span.jp-title {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 20px;
			color: #D98D2D;
		}
		span.jp-title-sub {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 18px;
			color: #A9D996;
		}
		.jp-table {
			display: table;
			padding-left: 0px;
			position: relative;
		}
		.jp-row {
			display: table-row;
			height: 100px;
		}
		.jp-cell {
			display: table-cell;
			width: 100px;	
		}
		.boxtemp-red-bottom-right {
			border-bottom: 1px solid red;
			border-right: 1px solid red;			
		}
		.img-pin {
			box-shadow: 4px 4px 20px #000;	
		}
		.jp-header {
			width: 980px;
			text-align: left;
			margin: 11px;
			padding-left: 0px;
		}


	</style>

	<!-- 
	poster-pin-free-w76-h40.png
	poster-map-w1301-h870.png
	poster-pin-premium-w106-h106.png
	poster-map-unpop-w1000-h710	
	-->

	<style>
		
		#file {
			display: none;
		}
		.file-input {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 12px;
			background-color: #ccc;						
			width: 390px;
			height: 15px;
			color: #CC1013;
			padding-top: 6px;
			padding-left: 10px; 
		}
		.file-input:hover {
			cursor:pointer;
		}
		
		.absolute_position {
			position: absolute;	
		}
		.pos-map {
			font-family: Arial, Helvetica, sans-serif;
			font-size: 16px;
			font-weight: 700;
			color: red;				
			position: relative;
			top: -40px;
			left: 50px;
		}
		
		.jpmap-table {
			display: table;
			width: 1400px; 
			margin: 0 auto;
		}
		.jpmap-row {
			display: table-row;
			height: 2000px;
		}
		.jpmap-col1 {
			display: table-cell; 
			vertical-align: top;
			width: 300px; 
		}
		.jpmap-col2 {
			display: table-cell; 
			vertical-align: top;
			text-align: left;
			width: 1000px;
		}
		.jpmap-col3 {
			display: table-cell; 
			width: 0px; 
		}
		
		select.coord-list {
			width: 280px;
			height: 400px;
			background-color: #ddd;
			border: 1px solid #000;
		}
		select.coord-list option {
			font-family: Arial, Helvetica, sans-serif;
			color: #000;
			font-size: 13px;
		}
		select.section-list {
			width: 280px;
			height: 200px;
			background-color: #ddd;
			border: 1px solid #000;
		}
		select.section-list option {
			font-family: Arial, Helvetica, sans-serif;
			color: #000;
			font-size: 13px;
		}
		.map-coordinate-container {
		}
		.map-coordinate-x {
			font-family: Arial, Helvetica, sans-serif;
			color: red;
			font-size: 12px;
		}
		.map-coordinate-text {
			font-family: Arial, Helvetica, sans-serif;
			color: #000;
			font-size: 14px;
		}
		.map-coordinate-text-title {
			font-family: Arial, Helvetica, sans-serif;
			color: #000;
			font-size: 14px;
			width: 150px;
		}
		.map-coordinate-y {
			font-family: Arial, Helvetica, sans-serif;
			color: blue;
			font-size: 12px;
		}
		.td-space {
			width: 10px;	
		}
		.journalposter-background {
			width: 1000px;
			margin-left: 10px;	
		}
		.new_tag {
		  	position: absolute;
		  	top: 0px;
		  	left: 0px;
		  	width: 70px;
		  	height: 30px;
		  	border: 1px solid #000;
			box-shadow: 4px 4px 20px #000;		  	
		}
		.new_tag_hover_none {
		  	background-color: #fff;			
		}	
		.new_tag_hover {
			background-color: #EBD7FA;		  	
		}	
		.list_remove {
			font-family: Arial, Helvetica, sans-serif;
			color: orange;
			font-size: 12px;			
			text-align: center;
			padding-top: 3px;
		 	width: 280px; 
		 	height: 20px; 
		 	background-color: #333; 
		 	border: 1px solid #000; 	
		}
		.list_remove:hover {
		 	background-color: #888;
		 	color: red;
		 	cursor: pointer; 
		}
		.list_commit {
			font-family: Arial, Helvetica, sans-serif;
			color: orange;
			font-size: 12px;			
			text-align: center;
			padding-top: 3px;
		 	width: 280px; 
		 	height: 20px; 
		 	background-color: #333; 
		 	border: 1px solid #000; 	
		}
		.list_commit:hover {
		 	background-color: #888;
		 	color: red;
		 	cursor: pointer; 
		}
		.input-section {
			font-family: Arial, Helvetica, sans-serif;
			color: #404040;			
			font-size: 14px;
			width: 280px;
			height: 22px;
			border-style:solid;
			border-radius: 0px;
			background-color: #fff;
			border-color: #478A3E;
			border-width: 1px;
			padding-left: 0px;
		}
		.input-section:focus {
			border-color: #478A3E;
			color: #000;
			-webkit-box-shadow: 0 0 10px #88E87B;
			-moz-box-shadow: 0 0 10px #88E87B;
			box-shadow: 0 0 10px #88E87B;
		}
		
	</style>


	<%= render 'share/backtotop_2' %>

	<%= render 'share/nav_journalposter' %>

	<div class="container-journalposter">
		
		<div class="jpmap-table">
			<div class="jpmap-row">
				<div class="jpmap-col1">
					<div style="height: 300px;"></div>

					<!-- <div id="x_elem"></div>
					<div id="y_elem"></div>
					<div id="page_width"></div>
					<div id="page_height"></div> -->

					<div class="map-coordinate-container">
						
						<table>	
							<tr>
								<td class="map-coordinate-text-title">Running: </td>
								<td>
									<div class="map-coordinate-text">X</div>									
								</td>	
								<td class="td-space"></td>
								<td>
									<div id="map_coordinate_x" class="map-coordinate-x"></div>			
								</td>	
								<td class="td-space"></td>
								<td>
									<div class="map-coordinate-text">Y</div>			
								</td>	
								<td class="td-space"></td>
								<td>
									<div id="map_coordinate_y" class="map-coordinate-y"></div>			
								</td>	
							</tr>
						</table>
						<div style="height: 10px;"></div>
						<table>	
							<tr>
								<td class="map-coordinate-text-title">Set: </td>								
								<td>
									<div class="map-coordinate-text">X</div>									
								</td>	
								<td class="td-space"></td>
								<td>
									<div id="map_pos_x" class="map-coordinate-x"></div>			
								</td>	
								<td class="td-space"></td>
								<td>
									<div class="map-coordinate-text">Y</div>			
								</td>	
								<td class="td-space"></td>
								<td>
									<div id="map_pos_y" class="map-coordinate-y"></div>			
								</td>	
							</tr>
						</table>
					</div>
					<div style="height: 20px;"></div>
					<table>
						<tr>
							<td>
								<div class="map-coordinate-text-title">X, Y, Section</div>
								<div style="height: 4px;"></div>
								<select name="coord_list" id="coord_list" multiple="multiple" class="coord-list"></select>
							</td>
						</tr>
					</table>
					
					<div style="height: 6px;"></div>
					
					<table>
						<tr>
							<td>
								<div id="coord_remove" class="list_remove">Remove</div>																
							</td>														
						</tr>
					</table>
					
					<div style="height: 6px;"></div>
					
					<table>
						<tr>
							<td>
								<div id="coord_commit" class="list_commit">Commit</div>																
							</td>														
						</tr>
					</table>
					
					
					<div style="height: 20px;"></div>
					
					<table>
						<tr>
							<td>
								<div class="map-coordinate-text-title">Sections</div>
								<div style="height: 4px;"></div>
								<select name="section_list" id="section_list" multiple="multiple" class="section-list"></select>
							</td>
						</tr>
					</table>
					<div style="height: 20px;"></div>
					
					<table>
						<tr>
							<td>
								<input class="input-section" id="input_section" name="input[section]" tabindex="" type="text" value="" />
							</td>
						</tr>
					</table>

					<div style="height: 6px;"></div>
					
					<table>
						<tr>
							<td>
								<div id="section_add" class="list_commit">Add</div>																
							</td>														
						</tr>
					</table>

					<div style="height: 6px;"></div>
					
					<table>
						<tr>
							<td>
								<div id="section_remove" class="list_remove">Remove</div>																
							</td>														
						</tr>
					</table>
					
				</div>
				
				<div class="jpmap-co2">
				
					<div style="height: 140px;"></div>
			
					<div class="jp-header">
						<span class="jp-title">Journal Poster 1</span>
					</div>
					
					<div style="height: 20px;"></div>
			
					<!-- <div style="margin-left: 11px;">
						<iframe src="/poster_map_1" width="1000" height="800"></iframe>			
					</div> -->

					<div id="journalposter_background" class="journalposter-background">
						
						<div id="new_tag" class="new_tag"></div>						
						<div class="jp-table">
			
											
						</div>
					</div>
			
					<div style="height: 30px;"></div>
				
				
						<%= form_for( @journal1poster_position, :html => {:id => "form_journal1poster_position"}) do |f| %>
								<%= csrf_meta_tag %>
							<!-- 
							id_map    
							pos_map    
							pos_x      
							pos_y     
							-->

								<div class="input-form-spacer-jp"></div>   
								<div class="row">
									<div class="cell-left-form-jp">
	        							<%= f.submit 'Submit', :id => 'submit_id', :tabindex => '6' %>
									</div>
									<div class="cell-right-form-jp">
										<%= link_to 'Cancel', journal1poster_positions_path %>
									</div>
								</div>
								<div class="input-form-spacer-jp"></div>    
							</div>

		        		<% end %>

				
					<!-- <div class="table-page">
						<table class="table-layout-fixed">
							<tr>
								<td width="700px">
								</td>
								<td style="100px;">				
								</td>
								<td style="200px; padding-right: 10px; text-align: right;">				
								</td>
							</tr>
							<tr>
								<td style="width: 100%;">
									<div id="tablets">
										 <#%= render 'journal1poster_positions/list' %#>
									</div>
								</td>
							</tr>
						</table>
					</div> -->				

					<div style="height: 30px;"></div>
					
					<div style="width: 200px; margin: 0 auto;">
					</div>
		
				</div>
			</div>
		</div>

	</div>

	<input id="x_pos_hidden" type="hidden" value="<% session[:x_pos] = '200' %>">
	<input id="y_pos_hidden" type="hidden" value="<% session[:y_pos] = '300' %>">
	
	<div style="height: 100px;"></div>

	<script>
			
		
			//$(window).load( function() {
			$(document).ready(function(){

				// alert('ready');
				// alert(
					// JSON.stringify(
						// { 
							// journal1poster_position: [{ pos_map: 1, area_text:'Math' },
								    				// { pos_map: 2, area_text:'English' }] 
						// } 
					// ) 
				// );

				// $("#tab1").addClass("active");


				// var image = '../journal_poster/poster-map-unpop-w1000-h710.png';
				// $('#journalposter_background').css({
					// background: '#000 url(' + image + ') no-repeat right top'
					// // background: '#F1F2E1 url(' + image + ') repeat right top'
				// });

				var p = 0;
				var position = 0;
				var x_elem = 0;
				var y_elem = 0;
				var x_not = 0;
				var y_not = 0;
				var x_margin = 10;
				
				$('#journalposter_background').mousemove( function(e) {
					p = $('#journalposter_background');
					position = p.position();
					x_elem = position.left;
					//$('#x_elem').html(x_elem);
					y_elem = position.top;
					//$('#y_elem').html(y_elem);
					x_not = Math.round( e.pageX - (x_elem + 10) );
					y_not = Math.round( e.pageY - (y_elem) );
					$('#map_coordinate_x').html(x_not);
					$('#map_coordinate_y').html(y_not);
				});			  			


				var setX = 0;
				var setY = 0;
				$('#journalposter_background').on('click', function(e) {
					
					if (!$("#new_tag").hasClass('new_tag_hover')) {
						p = $('#journalposter_background');
						position = p.position();
						x_elem = position.left;
						y_elem = position.top;
						setX = Math.round( e.pageX - (x_elem + 10) );
						setY = Math.round( e.pageY - (y_elem) );
					    $("#new_tag").css({'top':e.pageY,'left':e.pageX});
						$('#map_pos_x').html(setX);
						$('#map_pos_y').html(setY);
					}
					// pos = $(this).caret().start;
				});			  			


				$('#section_add').on('click', function() {
					
					var v = $("#input_section").val();
					section = "<option value='" + v + "'>" + v + "</option>";
					$('#section_list').append(section);
				});

				$('#section_remove').on('click', function() {
				    $("#section_list option:selected").remove();
				});

				// var values = $("select").val();
				// values.push("1");
				// $("select").val(values);

				// var valToSelect = "1";
				// $("#mySelect option[value='" + valToSelect + "']").attr("selected", true");


				// $("#list1").on('click', function() {
					// $('#list2 option').attr('selected',false);
					// var v = $("#list1 option:selected").val();
					// $("#list2 option[value='" + v + "']").attr("selected", true);
				// });
				// $("#list2").on('click', function() {
					// $('#list1 option').attr('selected',false);
					// var v = $("#list2 option:selected").val();
					// $("#list1 option[value='" + v + "']").attr("selected", true);
				// });


				var ap_X = 0;
				var ap_Y = 0;
				var coord = "";
				var coord_array = [];
				$("#new_tag").on('dblclick', function() {
					
					coord_array.push(setX);
					var l = coord_array.length;
					var index = l - 1;

					coord = "<option value='" + setX + "' data-key='" + index + "''>" + setX + "</option>";
					$('#coord_list').append(coord);


					
					// var v = $("#section_list option:selected").val();
					// coord = "<option value='" + setX + ", " + setY + ", " + v + "'>" + setX + ", " + setY + ", " + v + "</option>";
					// $('#coord_list').append(coord);
					// //$('#Select1 option').eq(0).after('<option value="new">new</option>'); // add new at the second position.
				});
				
				$("#new_tag").hover (
			  		function() {
  						$("#new_tag").removeClass('new_tag_hover_none').addClass('new_tag_hover');
					}, function() {
  						$("#new_tag").removeClass('new_tag_hover').addClass('new_tag_hover_none');
					}
				);


				$('#coord_remove').on('click', function() {
				    $("#coord_list option:selected").remove();
				});



                  // :id_map,   
                  // :pos_map,   
                  // :pos_x,      
                  // :pos_y,
                  // :area_text,
                  // :area,
                  // :area_pos,
                  // :pos_used,    

				$("#form_journal1poster_position").on('submit', function(e) {
				  e.preventDefault();
				  // var name = $("#name").val(); 
				  // var last_name = $("#last_name").val();
				  // var dataString = 'name='+name+'&last_name='+last_name;
				  
				  // var data_obj=  {
         		  	// journal1poster_position: {
                  		// area_text: "Math"
                  	// }
                  // }		

				  // var data_obj=  {
                  		// area_text: "Math"
                  // }		

				  // var data_obj= {};

                  		  
				  // data : JSON.stringify({"shared_items": [{"entity_id":"253","position":1}, {"entity_id":"823","position":2}]})                  		  
                  // Parameters: {"shared_items"=>[{"entity_id"=>"253", "position"=>1}, {"entity_id"=>"823", "position"=>2}]}

				  // var json_obj = [];
                  // var json_obj[0] = { journal1poster_position: {area_text:'Math'} }
                  // var json_obj[1] = { journal1poster_position: {area_text:'English'} }

                  // var json_obj = { journal1poster_position: { [{pos_map: 1, area_text:'Math'}], [{pos_map: 2, area_text:'English'}] } }

                  // var json_obj = {area_text:'Math'}
                  
                  // var json_obj = { "area_text": "Math" }
                  
				  // var JSONObject=  {
             		// table1: {
                      // title: "Title of text",
                      // url: "Url of text"
                      // }
                  // }                  
                  
                  
				  // var json_obj = JSON.stringify([{ journal1poster_position: { pos_map: 1, area_text:'Math' } },
								  // { journal1poster_position: { pos_map: 2, area_text:'English' } }]);

				  // var json_obj = JSON.stringify( { journal1poster_position: { { c1: { area_text:'Math' }, c2 { area_text:'English' } } } } );





				  // var json_obj = JSON.stringify( { journal1poster_position: [{ pos_map: 1, area_text:'Math' },
								    						 // { pos_map: 2, area_text:'English' }] } );

				  // var json_obj = { journal1poster_position: { area_text:'Math' } }
								  
				  
                  // var json_obj_0 = json_obj[1]; 
                  // var ar = new Array();
                  // var ar_obj = {ar: [{area_text:"Math"}, {area_text:"English"}] }
                  
				  var obj = '{ "journal1poster_position": [{ "area_text": "Math"}, {"area_text": "English"}] }'                  
                  
				  $.ajax({
				    type: 'POST',
				    //data : JSON.stringify(obj),
				    data : obj,
				    url: '/JournalPosterCreate-1',
				    dataType: "json",
				    contentType: "application/json",
				    processData: false,
				    beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
		            statusCode: {
		                 200:function() { alert("200"); },
		                 202:function() { alert("202"); }
		            },
		            success: function() {  alert("success"); },
		            error: function(xhr){  alert("error: " + xhr.statusText); }        
				  });
				  
				  return false;
				});


				
			});
		
		
		
			// var offset_top = 0;
			// jQuery(window).scroll(function() {
				// offset_top = $(window).scrollTop()
				// $('#eventstabs').css('top', offset_top);
			// });
		
			// img = $('<img />');
			// img.bind('load', function() {
				// // setTimeout( function(){
					// // centerSignin();
					// // showSignin();
					// // formValidate();
				// // }, 500);
			// });
			// img.attr('src', image);
		
	</script>












